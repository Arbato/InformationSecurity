# Secure REST API Example

Проект представляет собой защищенный REST API на Python (Flask) с интеграцией CI/CD для автоматической проверки безопасности.

## Реализованный функционал API

1.  **POST /auth/login** — Получает JSON `{"username": "admin", "password": "password123"}`. Возвращает JWT токен.
2.  **GET /api/data** — Возвращает список защищенных данных. Требует Header `Authorization: Bearer <token>`.
3.  **POST /api/echo** — Принимает сообщение и возвращает его обратно. Демонстрирует защиту от XSS.

## Меры защиты

### 1. Защита от SQL Injection (SQLi)
Используется **SQLAlchemy ORM**. В файле `app.py` при поиске пользователя используется метод:
`User.query.filter_by(username=username).first()`
ORM автоматически преобразует это в параметризованный запрос, делая невозможным внедрение SQL-кода через переменную `username`.

### 2. Защита от XSS (Cross-Site Scripting)
Все данные, возвращаемые пользователю в эндпоинте `/api/echo`, проходят через функцию `html.escape()`.
Это превращает опасные символы (например, `<script>`) в безопасные HTML-сущности (`&lt;script&gt;`).

### 3. Защита аутентификации (Broken Authentication)
* **Хэширование:** Пароли не хранятся в открытом виде. Используется библиотека **bcrypt** с солью.
* **JWT:** Для доступа к защищенным методам используется `flask-jwt-extended`. Токен подписывается секретным ключом.

## CI/CD и Security Scanners

В репозитории настроен GitHub Actions workflow (`.github/workflows/ci.yml`), который запускает:
1.  **SAST (Bandit):** Статический анализ кода на наличие уязвимостей.
2.  **SCA (Safety):** Проверка зависимостей (`requirements.txt`) на наличие известных CVE.

Отчеты о сканировании доступны во вкладке "Actions" репозитория.